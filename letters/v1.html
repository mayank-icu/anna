<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter to Marti</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Modern Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            font-family: 'Source Sans Pro', sans-serif;
            background: linear-gradient(135deg, #f6d3e7 0%, #e4ecfa 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: #333;
        }

        /* Modern Letter Container */
        .letter {
            background: rgba(255, 255, 255, 0.95);
            width: 90%;
            max-width: 650px;
            padding: 3rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transform: translateY(20px);
            opacity: 0;
            animation: letterEntrance 0.8s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
            backdrop-filter: blur(12px);
            line-height: 1.8;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2;
        }

        @keyframes letterEntrance {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #typed-text {
            white-space: pre-wrap;
            font-size: 1.15rem;
            color: #444;
            margin-bottom: 2rem;
        }

        .letter-header {
            margin-bottom: 2rem;
            color: #444;
            font-family: 'Playfair Display', serif;
        }

        .signature {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #6a4c93;
            margin-top: 2.5rem;
        }

        /* Elegant Gift Box */
        .gift-container {
            position: fixed;
            bottom: 4rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            z-index: 3;
        }

        .gift-box {
            width: 5.5rem;
            height: 5.5rem;
            background: #6a4c93;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .gift-box:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 12px 20px rgba(0,0,0,0.15);
        }

        .gift-lid {
            position: absolute;
            top: -0.8rem;
            left: 5%;
            width: 90%;
            height: 1rem;
            background: #503876;
            border-radius: 4px;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .ribbon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 110%;
            height: 0.6rem;
            background: #f9c5d1;
            border-radius: 2px;
        }

        .ribbon::before {
            content: '';
            position: absolute;
            top: -0.3rem;
            left: 50%;
            transform: translateX(-50%);
            width: 1.2rem;
            height: 1.2rem;
            background: #f9c5d1;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .open .gift-lid {
            transform: translateY(-2rem) rotate(-15deg);
        }

        .surprise-text {
            font-size: 1.4rem;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Subtle Confetti */
        .confetti {
            position: absolute;
            width: 0.8rem;
            height: 0.8rem;
            background: #f9c5d1;
            animation: confettiFall linear forwards;
            pointer-events: none;
            border-radius: 2px;
            z-index: 1;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Floating Elements Animation */
        .floating {
            position: absolute;
            font-size: 1.2rem;
            animation: float 10s linear infinite;
            opacity: 0.6;
            z-index: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Modern Reply Button */
        .reply-button {
            position: fixed;
            bottom: 1.5rem;
            background: linear-gradient(135deg, #6a4c93, #9677c7);
            color: white;
            border: none;
            padding: 0.9rem 2.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 5px 15px rgba(106, 76, 147, 0.3);
            font-size: 1.1rem;
            z-index: 3;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .reply-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 76, 147, 0.4);
        }

        .reply-button:active {
            transform: translateY(0);
        }

        /* Elegant Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 2.5rem;
            width: 90%;
            max-width: 450px;
            border-radius: 12px;
            transform: scale(0.8);
            opacity: 0;
            animation: modalEntrance 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        @keyframes modalEntrance {
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal h2 {
            margin-bottom: 1.5rem;
            color: #333;
            font-family: 'Playfair Display', serif;
        }

        .modal input,
        .modal textarea {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1.2rem;
            border: none;
            border-radius: 8px;
            background: #f5f5f5;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: 1rem;
        }

        .modal input:focus,
        .modal textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(106, 76, 147, 0.3);
            background: #fff;
        }

        .modal button {
            background: linear-gradient(135deg, #6a4c93, #9677c7);
            color: white;
            border: none;
            padding: 0.9rem 2.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 1rem;
            box-shadow: 0 5px 15px rgba(106, 76, 147, 0.3);
        }

        .modal button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 76, 147, 0.4);
        }

        .close {
            position: absolute;
            top: 1.2rem;
            right: 1.5rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #888;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #333;
        }
        
        /* Paragraph styling */
        #typed-text p {
            margin-bottom: 1.2rem;
        }
        
        /* Music control */
        .music-control {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.2s ease;
        }
        
        .music-control:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- Background Music -->
    <audio loop id="bgMusic">
        <source src="https://elipticia2.netlify.app/assets/audios/moments.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Music Control -->
    <div class="music-control" onclick="toggleMusic()">
        🎵
    </div>

    <!-- Letter Container -->
    <div class="letter">
        <h2 class="letter-header">Dear Letícia,</h2>
        <div id="typed-text"></div>
        <p class="signature">With care, <br> Mayank</p>
    </div>

    <!-- Gift Box -->
    <div class="gift-container">
        <div class="gift-box" onclick="openGift()">
            <div class="gift-lid"></div>
            <div class="ribbon"></div>
        </div>
        <p class="surprise-text">🤗 A hug for you! 🫂</p>
    </div>

    <!-- Reply Button -->
    <button class="reply-button" onclick="showReplyForm()">💌 Reply to me</button>

    <!-- Reply Modal -->
    <div id="replyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
            <h2>Send Your Thoughts</h2>
            <form id="replyForm" action="https://formspree.io/f/mjvqobge" method="POST">
                <textarea name="message" placeholder="Your message..." rows="5" required></textarea>
                <button type="submit">Send 💌</button>
            </form>
            <p id="successMessage" style="display: none; color: #6a4c93; margin-top: 1rem;">Message sent successfully! ❤️</p>
        </div>
    </div>

    <script>

const text = `I hope this little surprise brings a smile to your face today. 

You're an amazing person and I wanted to create something special just for you. Even though we're far apart, I'm thinking of you and hoping things get better soon.

You deserve all the good things coming your way.

Take care,
Mayank`;
let i = 0;

        function typeEffect() {
            if (i < text.length) {
                const currentChar = text.charAt(i);
                
                // Create paragraph breaks
                if (i > 0 && text.charAt(i-1) === '\n' && currentChar === '\n') {
                    const currentText = document.getElementById("typed-text").innerHTML;
                    document.getElementById("typed-text").innerHTML = currentText + '</p><p>';
                    i++;
                } else if (currentChar !== '\n') {
                    document.getElementById("typed-text").innerHTML += currentChar;
                }
                
                i++;
                setTimeout(typeEffect, 40);
            }
        }
        
        // Initialize with a paragraph tag
        document.getElementById("typed-text").innerHTML = '<p>';
        
        // Start typing after a slight delay
        setTimeout(typeEffect, 1000);

        // Gift Animation
        function openGift() {
            const gift = document.querySelector('.gift-box');
            const surpriseText = document.querySelector('.surprise-text');
            
            gift.classList.add('open');
            surpriseText.style.opacity = '1';

            // Create Confetti
            for(let i = 0; i < 60; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = `hsl(${Math.random() * 60 + 300}, 70%, 80%)`;
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.animationDelay = Math.random() * 1 + 's';
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // Form Submission
        const form = document.getElementById('replyForm');
        const successMessage = document.getElementById('successMessage');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            try {
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    successMessage.style.display = 'block';
                    form.reset();
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                        closeModal();
                    }, 2000);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        });

        // Modal Handling
        function showReplyForm() {
            document.getElementById('replyModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('replyModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('replyModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Create Floating Elements
        function createFloatingElements() {
            const elements = ['✉️', '💜', '✨', '🌸', '🌿'];
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.className = 'floating';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = Math.random() * 100 + 'vw';
                element.style.animationDelay = Math.random() * 5 + 's';
                element.style.animationDuration = Math.random() * 10 + 10 + 's';
                element.style.fontSize = Math.random() * 16 + 12 + 'px';
                element.style.opacity = Math.random() * 0.4 + 0.2;
                document.body.appendChild(element);
            }
        }
        createFloatingElements();

        // Background music control
        let musicPlaying = false;
        const audio = document.getElementById('bgMusic');
        
        function toggleMusic() {
            if (musicPlaying) {
                audio.pause();
                musicPlaying = false;
                document.querySelector('.music-control').textContent = '🔇';
            } else {
                audio.play().catch(() => {});
                musicPlaying = true;
                document.querySelector('.music-control').textContent = '🎵';
            }
        }
        
        // First click anywhere starts music
        window.addEventListener('click', () => {
            if (!musicPlaying) {
                toggleMusic();
            }
        }, { once: true });
    </script>
</body>
</html>
